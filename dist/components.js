!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("d3"),require("leaflet"),require("react-leaflet"),require("koto"),require("react-dom"),require("cartodb-client"),require("intro.js"),require("lodash")):"function"==typeof define&&define.amd?define(["react","d3","leaflet","react-leaflet","koto","react-dom","cartodb-client","intro.js","lodash"],e):"object"==typeof exports?exports["@panorama/toolkit"]=e(require("react"),require("d3"),require("leaflet"),require("react-leaflet"),require("koto"),require("react-dom"),require("cartodb-client"),require("intro.js"),require("lodash")):t["@panorama/toolkit"]=e(t.React,t.d3,t.leaflet,t["react-leaflet"],t.koto,t["react-dom"],t["cartodb-client"],t["intro.js"],t.lodash)}(this,function(t,e,n,o,i,a,s,u,l){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,o){r.apply(this,[t,e,o].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";var r=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=n(45),i=r(o),a=n(21),s=r(a),u=n(16),l=r(u),c=n(43),f=r(c),p=n(67),h=r(p),d=n(68),y=r(d),v=n(69),m=r(v),g=n(44),b=r(g),x=n(74),_=r(x),P=n(!function(){var t=new Error('Cannot find module "./HashManager/HashManager"');throw t.code="MODULE_NOT_FOUND",t}()),T=r(P),k=n(70),O=r(k),w=n(71),S=r(w),C=n(72),E=r(C),M=n(73),j=r(M),L=n(77),I=r(L),A=n(78),D=r(A),R=n(79),N=r(R),W=n(80),F=r(W),q=n(28),U=n(81),B=r(U),H=n(82),z=r(H),V=n(76),$=r(V);e["default"]={Axis:i["default"],ChartBase:s["default"],PanoramaChart:l["default"],AreaChart:f["default"],CartoDBLoader:h["default"],CartoDBTileLayer:y["default"],ChartSlider:m["default"],DiscreteBarChart:b["default"],Donut:_["default"],HashManager:T["default"],HorizontalDiscreteBarChart:O["default"],IntroManager:S["default"],ItemSelector:E["default"],LeafletChoropleth:j["default"],Legend:I["default"],MapChoropleth:D["default"],Navigation:N["default"],OffsetAreaChart:F["default"],PanoramaDispatcher:q.PanoramaDispatcher,PanoramaEventTypes:q.PanoramaEventTypes,Punchcard:B["default"],TimeBasedMarkers:z["default"],Tooltip:$["default"]},t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.__esModule=!0},function(t,e,n){"use strict";var r=n(85)["default"];e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(t,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),e.__esModule=!0},function(t,e,n){"use strict";var r=n(86)["default"];e["default"]=function(t,e,n){for(var o=!0;o;){var i=t,a=e,s=n;o=!1,null===i&&(i=Function.prototype);var u=r(i,a);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=a,n=s,o=!0,u=c=void 0}},e.__esModule=!0},function(t,e,n){"use strict";var r=n(84)["default"],o=n(87)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=r(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o?o(t,e):t.__proto__=e)},e.__esModule=!0},function(e,n){e.exports=t},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var r=n(115)("wks"),o=n(122),i=n(12).Symbol;t.exports=function(t){return r[t]||(r[t]=i&&i[t]||(i||o)("Symbol."+t))}},function(t,n){t.exports=e},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={"default":n(93),__esModule:!0}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(23);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports={}},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=s(u),c=n(9),f=s(c),p="panorama chart ",h=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{data:u.PropTypes.oneOfType([u.PropTypes.array,u.PropTypes.object]),width:u.PropTypes.number,height:u.PropTypes.number,margin:u.PropTypes.shape({top:u.PropTypes.number,right:u.PropTypes.number,bottom:u.PropTypes.number,left:u.PropTypes.number}),style:u.PropTypes.object,xScale:u.PropTypes.func,yScale:u.PropTypes.func,xAccessor:u.PropTypes.func,yAccessor:u.PropTypes.func,axisProps:u.PropTypes.shape({scale:u.PropTypes.func,ticks:u.PropTypes.number,orient:u.PropTypes.string,offset:u.PropTypes.array})},enumerable:!0},{key:"defaultProps",value:{data:[],width:600,height:400,margin:{top:20,right:30,bottom:20,left:30},style:{},xScale:f["default"].scale.linear(),yScale:f["default"].scale.linear(),xAccessor:function(t){return t.key},yAccessor:function(t){return t.value},axisProps:{scale:f["default"].scale.linear(),ticks:5,xOrient:"bottom",yOrient:"left",offset:[0,0]}},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy(this.refs.chart),this.chart=null}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){this.chart||(this.chart=new this.chartConstructor(f["default"].select(this.refs.chart),this.props)),this.chart.updateConfigs&&this.chart.updateConfigs(this.props),this.chart.draw(this.props.data)}},{key:"getClassSuffix",value:function(){return""}},{key:"renderChildren",value:function(){return""}},{key:"render",value:function(){return l["default"].createElement("div",{className:p+this.getClassSuffix(),style:this.props.style},l["default"].createElement("svg",{ref:"chart",className:"wrapper"}),this.renderChildren())}}]),e}(l["default"].Component);e["default"]=h,t.exports=e["default"]},function(t,e,n){var r=n(30);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(12),o=n(10),i=n(17),a="prototype",s=function(t,e,n){var u,l,c,f=t&s.F,p=t&s.G,h=t&s.S,d=t&s.P,y=t&s.B,v=t&s.W,m=p?o:o[e]||(o[e]={}),g=p?r:h?r[e]:(r[e]||{})[a];p&&(n=e);for(u in n)l=!f&&g&&u in g,l&&u in m||(c=l?g[u]:n[u],m[u]=p&&"function"!=typeof g[u]?n[u]:y&&l?i(c,r):v&&g[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?i(Function.call,c):c,d&&((m[a]||(m[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),c=u(l),f=n(41),p=u(f),h=n(45),d=u(h),y=function(t){function e(t,n){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var o=void 0,i=void 0;n.axisProps&&(o=s({},n.axisProps,{orient:n.axisProps.xOrient}),i=s({},n.axisProps,{orient:n.axisProps.yOrient})),s(this.configs,{width:{value:n.width},height:{value:n.height},margin:{value:n.margin},xScale:{value:n.xScale},yScale:{value:n.yScale},xAxis:{value:n.axisProps?new d["default"](this.base,"x",o):null},yAxis:{value:n.axisProps?new d["default"](this.base,"y",i):null}})}return o(e,t),i(e,[{key:"updateConfigs",value:function(t){this.config("height",t.height).config("width",t.width).config("margin",t.margin).config("xScale",t.xScale).config("yScale",t.yScale).accessor("x",t.xAccessor).accessor("y",t.yAccessor),this.config("xAxis")&&(t.axisProps?this.config("xAxis").updateConfigs(s({},t.axisProps,{orient:t.axisProps.xOrient})):(this.config("xAxis").destroy(),this.config("xAxis",null))),this.config("yAxis")&&(t.axisProps?this.config("yAxis").updateConfigs(s({},t.axisProps,{orient:t.axisProps.yOrient})):(this.config("yAxis").destroy(),this.config("yAxis",null)))}},{key:"updateDimensions",value:function(){var t=this.config("margin");this._innerWidth=this.config("width")-t.left-t.right,this._innerHeight=this.config("height")-t.top-t.bottom,this.base.attr("width",this.config("width")),this.base.attr("height",this.config("height")),this.baseLayer.attr("transform","translate("+t.left+","+t.top+")")}},{key:"updateScales",value:function(t){var e=this;this.config("xScale").range([0,this._innerWidth]),this.config("yScale").range([this._innerHeight,0]),this.config("xScale").domain(t.map(function(t){return e.accessor("x")(t)})),this.config("yScale").domain([0,c["default"].max(t,function(t){return e.accessor("y")(t)})])}},{key:"preDraw",value:function(t){this.updateDimensions(),this.updateScales(t);var e=this.config("margin");this.config("xAxis")&&this.config("xAxis").update(this.config("xScale"),[e.left,e.top+this._innerHeight]),this.config("yAxis")&&this.config("yAxis").update(this.config("yScale"),[e.left,e.top])}},{key:"destroy",value:function(){this.base.remove(),this.base=null}}]),e}(p["default"]);e["default"]=y,t.exports=e["default"]},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){function r(t){return null!=t&&i(o(t))}var o=n(165),i=n(25);t.exports=r},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){var r=n(61),o=n(25),i=n(26),a="[object Array]",s=Object.prototype,u=s.toString,l=r(Array,"isArray"),c=l||function(t){return i(t)&&o(t.length)&&u.call(t)==a};t.exports=c},function(t,e,n){"use strict";var r=n(11)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=n(132),i={Legend:{selected:"Legend:selected"},ItemSelector:{selected:"ItemSelector:selected"},ChartSlider:{selected:"ChartSlider:selected"}};e.PanoramaEventTypes=i;var a={Legend:{selected:function(t,e){a.emit(i.Legend.selected,t,e)}},ItemSelector:{selected:function(t,e){a.emit(i.ItemSelector.selected,t,e)}},ChartSlider:{selected:function(t){a.emit(i.ChartSlider.selected,t)}}};e.PanoramaDispatcher=a,r(a,o.EventEmitter.prototype)},function(t,e){"use strict";e["default"]=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},e.__esModule=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(22),o=n(8)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[o])?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){t.exports=!n(34)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(7),o=n(52);t.exports=n(33)?function(t,e,n){return r.setDesc(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(7).setDesc,o=n(48),i=n(8)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(118)(!0);n(50)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(125);var r=n(14);r.NodeList=r.HTMLCollection=r.Array},function(t,e){function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var o=n(24),i=n(26),a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable;t.exports=r},function(t,e){t.exports=i},function(t,e){t.exports=a},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),c=u(l),f=n(21),p=u(f),h=n(16),d=u(h),y=n(6);n(134);var v=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=m}return o(e,t),i(e,null,[{key:"propTypes",value:s({},e.propTypes,{fillColor:y.PropTypes.oneOfType([y.PropTypes.string,y.PropTypes.number]),fillOpacity:y.PropTypes.number}),enumerable:!0}]),i(e,[{key:"getClassSuffix",value:function(){return"area-chart"}}]),e}(d["default"]);e["default"]=v;var m=function(t){function e(t,n){var o=this;a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n);var i=this;this.configs.fillColor={value:n.fillColor},this.configs.fillOpacity={value:n.fillOpacity};var s=c["default"].svg.area().interpolate("basis").x(function(t){return o.config("xScale")(o.accessor("x")(t))}).y0(function(t){return o.config("yScale")(0)}).y1(function(t){return o.config("yScale")(o.accessor("y")(t))}),u=this.baseLayer=this.base.append("g").classed("area-layer",!0);this.updateDimensions();var l=this.layer("area-layer",u,{dataBind:function(t){return this.selectAll("path.area").data(t)},insert:function(){return this.append("path").attr("class","area").style({fill:i.config("fillColor"),opacity:i.config("fillOpacity"),stroke:"none"})}});l.on("update",function(){}).on("enter",function(){}).on("merge",function(){return this.attr("d",function(t){return s(t)}).style({fill:i.config("fillColor"),opacity:i.config("fillOpacity"),stroke:"none"})}).on("exit",function(){})}return o(e,t),i(e,[{key:"updateConfigs",value:function(t){r(Object.getPrototypeOf(e.prototype),"updateConfigs",this).call(this,t),this.config("fillColor",t.fillColor).config("fillOpacity",t.fillOpacity)}},{key:"updateScales",value:function(t){this.config("xScale").range([0,this._innerWidth]),this.config("yScale").range([this._innerHeight,0])}}]),e}(p["default"]);e.AreaChartImpl=m},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=n(16),f=u(c),p=n(21),h=u(p),d=n(9),y=u(d);n(136);var v=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=m}return o(e,t),i(e,null,[{key:"propTypes",value:s({},f["default"].propTypes,{barSpacing:l.PropTypes.number}),enumerable:!0},{key:"defaultProps",value:s({},f["default"].defaultProps,{barSpacing:.1,xScale:y["default"].scale.ordinal()}),enumerable:!0}]),i(e,[{key:"getClassSuffix",value:function(){return"bar-chart vertical"}}]),e}(f["default"]);e["default"]=v;var m=function(t){function e(t,n){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n);var o=this;this.configs.barSpacing={value:n.barSpacing};var i=this.baseLayer=this.base.append("g").classed("bars",!0);this.updateDimensions();var s=this.layer("bars",i,{dataBind:function(t){return this.selectAll("rect").data(t)},insert:function(){return this.append("rect").attr("class","bar").attr("width",o.config("xScale").rangeBand())}});s.on("enter",function(){return this.attr("x",function(t){return o.config("xScale")(o.accessor("x")(t))}).attr("y",function(t){return o.config("yScale")(o.accessor("y")(t))}).attr("height",function(t){return o._innerHeight-o.config("yScale")(o.accessor("y")(t))})}).on("merge",function(){}).on("exit",function(){})}return o(e,t),i(e,[{key:"updateScales",value:function(t){var e=this;this.config("xScale").rangeRoundBands([0,this._innerWidth],this.config("barSpacing")),this.config("yScale").range([this._innerHeight,0]),this.config("xScale").domain(t.map(function(t){return e.accessor("x")(t)})),this.config("yScale").domain([0,y["default"].max(t,function(t){return e.accessor("y")(t)})])}}]),e}(h["default"]);e.DiscreteBarChartImpl=m},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(9),l=s(u),c=n(41),f=s(c),p=function(t){function e(t,n,o){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.configs.scale={value:o.scale},this.configs.ticks={value:o.ticks},this.configs.orient={value:o.orient},this.configs.offset={value:o.offset},this.axis=l["default"].svg.axis(),this.baseLayer=this.base.append("g").classed(n+" axis",!0)}return o(e,t),i(e,[{key:"updateConfigs",value:function(t){this.config("scale",t.scale),this.config("ticks",t.ticks),this.config("orient",t.orient),this.config("offset",t.offset)}},{key:"update",value:function(t,e){t&&this.config("scale",t),e?this.config("offset",e):e=this.config("offset"),this.axis.scale(this.config("scale")).ticks(this.config("ticks")).orient(this.config("orient")),this.baseLayer.attr("transform","translate("+e[0]+","+e[1]+")").call(this.axis)}},{key:"destroy",value:function(){this.base.remove(),this.base=null}}]),e}(f["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(91),__esModule:!0}},function(t,e){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},e.__esModule=!0},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(51),o=n(18),i=n(53),a=n(35),s=n(48),u=n(14),l=n(106),c=n(36),f=n(7).getProto,p=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",v="values",m=function(){return this};t.exports=function(t,e,n,g,b,x,_){l(n,e,g);var P,T,k=function(t){if(!h&&t in C)return C[t];switch(t){case y:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",w=b==v,S=!1,C=t.prototype,E=C[p]||C[d]||b&&C[b],M=E||k(b);if(E){var j=f(M.call(new t));c(j,O,!0),!r&&s(C,d)&&a(j,p,m),w&&E.name!==v&&(S=!0,M=function(){return E.call(this)})}if(r&&!_||!h&&!S&&C[p]||a(C,p,M),u[e]=M,u[O]=m,b)if(P={values:w?M:k(v),keys:x?M:k(y),entries:w?k("entries"):M},_)for(T in P)T in C||i(C,T,P[T]);else o(o.P+o.F*(h||S),e,P);return P}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(35)},function(t,e,n){var r=n(7).getDesc,o=n(23),i=n(13),a=function(t,e){if(i(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(17)(Function.call,r(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:a}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(49),o=n(32);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(31),o=n(8)("iterator"),i=n(14);t.exports=n(10).getIteratorMethod=function(t){return void 0!=t?t[o]||t["@@iterator"]||i[r(t)]:void 0}},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&a(g(t))}function i(t,e){return t="number"==typeof t||h.test(t)?+t:-1,e=null==e?m:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function s(t){for(var e=l(t),n=e.length,r=n&&t.length,o=!!r&&a(r)&&(p(t)||f(t)),s=-1,u=[];++s<n;){var c=e[s];(o&&i(c,r)||y.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(p(t)||f(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,s=Array(e),l=e>0;++r<e;)s[r]=r+"";for(var c in t)l&&i(c,e)||"constructor"==c&&(o||!y.call(t,c))||s.push(c);return s}var c=n(149),f=n(152),p=n(153),h=/^\d+$/,d=Object.prototype,y=d.hasOwnProperty,v=c(Object,"keys"),m=9007199254740991,g=r("length"),b=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):u(t)?v(t):[]}:s;t.exports=b},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),a=Array(i);++r<i;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=a,t.apply(this,s)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,a){return t.call(e,n,r,o,i,a)}}return function(){return t.apply(e,arguments)}}var o=n(173);t.exports=r},function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(171);t.exports=r},function(t,e,n){function r(t){return o(t)?t:Object(t)}var o=n(15);t.exports=r},function(t,e,n){var r=n(156),o=n(157),i=n(163),a=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=a},function(t,e,n){var r=n(61),o=n(24),i=n(15),a=n(169),s=r(Object,"keys"),u=s?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?a(t):i(t)?s(t):[]}:a;t.exports=u},function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&s(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,l="function"==typeof n&&n.prototype===t,f=Array(e),p=e>0;++r<e;)f[r]=r+"";for(var h in t)p&&a(h,e)||"constructor"==h&&(l||!c.call(t,h))||f.push(h);return f}var o=n(40),i=n(27),a=n(39),s=n(25),u=n(15),l=Object.prototype,c=l.hasOwnProperty;t.exports=r},function(t,e){/*!
	 * Adapted from jQuery UI core
	 *
	 * http://jqueryui.com
	 *
	 * Copyright 2014 jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/category/ui-core/
	 */
function n(t,e){var n=t.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"===n?t.href||e:e)&&o(t)}function r(t){return t.offsetWidth<=0&&t.offsetHeight<=0||"none"===t.style.display}function o(t){for(;t&&t!==document.body;){if(r(t))return!1;t=t.parentNode}return!0}function i(t){var e=t.getAttribute("tabindex");null===e&&(e=void 0);var r=isNaN(e);return(r||e>=0)&&n(t,!r)}function a(t){return[].slice.call(t.querySelectorAll("*"),0).filter(function(t){return i(t)})}t.exports=a},function(t,e,n){"use strict";function r(t,e){function n(t){return new o(function(e,n){var o=(0,s["default"])(3);t.forEach(function(t){o.defer(r,t)}),o.awaitAll(function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];t?n(t):e.apply(void 0,o)})})}function r(t,n){i.sqlRequest(t.query,function(e,r){if(e)n(e);else{var o=void 0;switch(t.format.toLowerCase()){case"geojson":o=r.features;break;default:o=r.rows}n(null,o)}},{format:t.format,dangerouslyExposedAPIKey:e})}var i=new l["default"](t);return{query:n}}var o=n(88)["default"],i=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var a=n(175),s=i(a),u=n(182),l=i(u);t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"];Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),u=n(19),l=n(20),c=function(t){function e(){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"componentWillMount",value:function(){if(r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this),!cartodb)throw new Error('CartoDBTileLayer requires `cartodb`. `cartodb` is not currently available as an npm package and therefore must be loaded as a global, e.g. via a CDN script in your index.html, such as <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.core.js">');this.leafletElement=(0,u.tileLayer)("",this.props),this._getCartoDBTilesTemplates(function(t,e){t?console.error(t):this.leafletElement.setUrl(e.tiles[0])}.bind(this))}},{key:"_getCartoDBTilesTemplates",value:function(t){cartodb.Tiles.getTiles({type:"cartodb",user_name:this.props.userId,sublayers:[{sql:this.props.sql,cartocss:this.props.cartocss}]},function(e,n){!e||n?(n||(n="Empty response."),t(n,e)):t(null,e)})}}],[{key:"propTypes",value:{userId:s.PropTypes.string,sql:s.PropTypes.string,cartocss:s.PropTypes.string},enumerable:!0}]),e}(l.BaseTileLayer);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=s(u),c=n(42),f=s(c),p=n(9),h=s(p);n(135);var d=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{width:u.PropTypes.number,height:u.PropTypes.number,scale:u.PropTypes.func,orient:u.PropTypes.string,margin:u.PropTypes.shape({top:u.PropTypes.number,right:u.PropTypes.number,bottom:u.PropTypes.number,left:u.PropTypes.number}),children:l["default"].PropTypes.node,selectedValue:u.PropTypes.number,onClickOrMove:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{scale:h["default"].scale.linear().clamp(!0),orient:"bottom",margin:{top:20,right:30,bottom:20,left:30},onClickOrMove:null},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){y.create(this.refs.axis,this.props.scale,this.props.orient,this.props.margin,this.props.onClickOrMove);try{this.containerNode=f["default"].findDOMNode(this)}catch(t){}this.forceUpdate()}},{key:"componentDidUpdate",value:function(){y.update(this.refs.axis,this.props.scale,this.props.orient,this.props.margin,this.props.selectedValue,this.props.onClickOrMove);try{this.containerNode=f["default"].findDOMNode(this)}catch(t){}}},{key:"componentWillUnmount",value:function(){y.destroy(this.refs.axis)}},{key:"render",value:function(){var t=u.Children.count(this.props.children);return t>1&&console.warn("ChartSlider is designed to wrap only one child component, but it found "+t+" children."),l["default"].createElement("div",{className:"panorama chart-slider"},l["default"].cloneElement(this.props.children,{width:this.containerNode?this.containerNode.offsetWidth:this.props.width,height:this.props.height}),l["default"].createElement("div",{className:"top-rule",style:{marginLeft:this.props.margin.left+"px",marginRight:this.props.margin.right+"px",width:"calc(100% - "+(this.props.margin.left+this.props.margin.right)+"px)"}}),l["default"].createElement("div",{className:"d3-chart-slider",ref:"axis"}))}}]),e}(l["default"].Component);e["default"]=d;var y={create:function(t,e,n,r,o){this.onBrushMoved=this.onBrushMoved.bind(this),this.node=t;var i=13;this.axisPrimary=h["default"].svg.axis().orient(n).ticks(5).tickFormat(String).tickSize(i),this.axisSecondary=h["default"].svg.axis().orient(n).ticks(10).tickFormat(function(t){return""}).tickSize(i-3),this.axisTertiary=h["default"].svg.axis().orient(n).ticks(40).tickFormat(function(t){return""}).tickSize(i-6),this.brush=h["default"].svg.brush().on("brush",this.onBrushMoved);var a=h["default"].select(t).append("svg");a.append("g").attr("class","axis tertiary"),a.append("g").attr("class","axis secondary"),a.append("g").attr("class","axis primary"),this.handle=a.append("g").attr("class","handle");var s=t.offsetHeight-r.bottom+i+3,u=this.handle.append("g").attr("class","handle-elements");u.append("line").attr({x1:0,x2:0,y1:0,y2:s});var l=10;u.append("path").attr("d","M 30 0 L 70 0 C 85 0 93.29179606750063 13.416407864998739 86.58359213500125 26.832815729997478 L 63.41640786499873 73.16718427000252 C 56.708203932499366 86.58359213500125 43.29179606750063 86.58359213500125 36.58359213500126 73.16718427000252 L 13.416407864998739 26.832815729997478 C 6.708203932499369 13.416407864998739 15 0 30 0 Z ").attr("transform","scale("+l/100+") translate(-50, 0)"),u.append("path").attr("d","M 30 0 L 70 0 C 85 0 93.29179606750063 13.416407864998739 86.58359213500125 26.832815729997478 L 63.41640786499873 73.16718427000252 C 56.708203932499366 86.58359213500125 43.29179606750063 86.58359213500125 36.58359213500126 73.16718427000252 L 13.416407864998739 26.832815729997478 C 6.708203932499369 13.416407864998739 15 0 30 0 Z ").attr("transform","rotate(180) scale("+l/100+") translate(-50, "+-(100/l*s)+")"),this.update(t,e,n,r)},update:function(t,e,n,r,o,i){this.node=t,this.onClickOrMove=i,e.range([0,t.offsetWidth-r.left-r.right]),this.axisPrimary.scale(e),this.axisSecondary.scale(e),this.axisTertiary.scale(e),this.brush.x(e);var a="translate("+r.left+", "+(t.offsetHeight-r.bottom)+")",s=h["default"].select(t).select("svg");s.attr("width","100%").attr("height","100%"),s.select(".axis.primary").call(this.axisPrimary).attr("transform",a).selectAll("text").attr("y",Math.floor(2/3*r.bottom)),s.select(".axis.secondary").call(this.axisSecondary).attr("transform",a),s.select(".axis.tertiary").call(this.axisTertiary).attr("transform",a),this.handle.call(this.brush).attr("transform","translate("+r.left+", 0)").select(".background").on("mousedown.brush",this.onBrushMoved).on("touchstart.brush",this.onBrushMoved),this.handle.selectAll(".background").attr("height","100%"),"undefined"!=typeof o&&this.onSelectedValueChanged(o)},destroy:function(t){h["default"].select(t).html(""),this.node=null,this.axisPrimary=null,this.axisSecondary=null,this.axisTertiary=null,this.brush=null,this.handle=null},onBrushMoved:function(){var t=this.brush.x(),e=t.domain(),n=h["default"].mouse(h["default"].select(this.node).select(".axis")[0][0])[0],r=t.invert(n);r=Math.round(Math.max(e[0],Math.min(e[1],r))),this.onClickOrMove&&this.onClickOrMove(r)},onSelectedValueChanged:function(t){this.handle.call(this.brush.extent([t,t+2]));var e=this.brush.x()(t);this.handle.select(".handle-elements").attr("transform","translate("+e+", 0)")}};t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(9),c=u(l),f=n(44),p=u(f),h=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=d}return o(e,t),i(e,null,[{key:"propTypes",value:s({},p["default"].propTypes),enumerable:!0},{key:"defaultProps",value:s({},p["default"].defaultProps,{xScale:c["default"].scale.linear(),yScale:c["default"].scale.ordinal()}),enumerable:!0}]),i(e,[{key:"getClassSuffix",value:function(){return"bar-chart horizontal"}}]),e}(p["default"]);e["default"]=h;var d=function(t){function e(t,n){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n);var o=this,i=this.layer("bars");i.insert=function(){return this.append("rect").attr("class","bar").attr("height",o.config("yScale").rangeBand())},i.on("enter",function(){return this.attr("x",function(t){return"0"}).attr("y",function(t){return o.config("yScale")(o.accessor("y")(t))}).attr("width",function(t){return o.config("xScale")(o.accessor("x")(t))}).attr("height",o.config("yScale").rangeBand())})}return o(e,t),i(e,[{key:"updateScales",value:function(t){var e=this;this.config("yScale").rangeRoundBands([0,this._innerHeight],this.config("barSpacing")),this.config("yScale").domain(t.map(function(t){return e.accessor("y")(t)})),this.config("xScale").range([0,this._innerWidth]),this.config("xScale").domain([0,c["default"].max(t,function(t){return e.accessor("x")(t)})])}}]),e}(f.DiscreteBarChartImpl);e.HorizontalDiscreteBarChartImpl=d},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(11)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(183),c=n(6),f=u(c);n(137);var p=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onIntroExit=this.onIntroExit.bind(this),this.initIntro()}return o(e,t),i(e,null,[{key:"propTypes",value:{open:c.PropTypes.bool,step:c.PropTypes.oneOfType([c.PropTypes.number,c.PropTypes.string]),steps:c.PropTypes.arrayOf(c.PropTypes.shape({element:c.PropTypes.string,intro:c.PropTypes.string,position:function(t,e,n){return/top|right|bottom|left/.test(t[e])?void 0:new Error("`position` must be one of 'top', 'right', 'bottom', or 'left'.")}})).isRequired,config:c.PropTypes.object,onExit:c.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{open:!1,step:0,steps:[],config:{showStepNumbers:!1,skipLabel:"×",nextLabel:"⟩",prevLabel:"⟨",doneLabel:"×"},onExit:null},enumerable:!0}]),i(e,[{key:"initIntro",value:function(){this.intro=(0,l.introJs)(document.querySelector("body")),this.intro.onexit(this.onIntroExit),this.intro.oncomplete(this.onIntroExit),this.introIsOpen=!1}},{key:"onIntroExit",value:function(){this.introIsOpen=!1,this.props.onExit&&this.props.onExit()}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.props.open){if(this.introIsOpen)return;if(this.intro._introItems)this.props.step&&1!==this.props.step?this.intro.goToStep(this.props.step-1).start():this.intro.start();else{var t={steps:this.props.steps};t=s(t,this.props.config),this.intro.setOptions(t),this.intro.goToStep(this.props.step).start()}this.introIsOpen=!0}else this.intro.exit()}},{key:"getDefaultState",value:function(){return{}}},{key:"render",value:function(){return f["default"].createElement("div",{className:"panorama intro-manager"})}}]),e}(f["default"].Component);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=s(u),c=n(28);n(138);var f=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onItemClick=this.onItemClick.bind(this),this.onArrowMouseDown=this.onArrowMouseDown.bind(this),this.onArrowMouseUp=this.onArrowMouseUp.bind(this),this.animateScrollPosition=this.animateScrollPosition.bind(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{title:u.PropTypes.string,items:u.PropTypes.array.isRequired,selectedIndex:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.number]),selectedItem:u.PropTypes.object,onItemSelected:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{title:"",items:[],selectedIndex:"",selectedItem:null,onItemSelected:null},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.scrollToSelectedItem()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){this.scrollToSelectedItem()}},{key:"onItemClick",value:function(t){t.currentTarget&&t.currentTarget.dataset&&(this.props.onItemSelected&&this.props.onItemSelected(this.props.items[t.currentTarget.dataset.index],t.currentTarget.dataset.index),c.PanoramaDispatcher.ItemSelector.selected(this.props.items[t.currentTarget.dataset.index],t.currentTarget.dataset.index))}},{key:"onArrowMouseDown",value:function(t){var e=void 0;if(t.target.classList.contains("up-arrow")?e=-1:t.target.classList.contains("down-arrow")&&(e=1),e){var n=this.refs["item-list"],r=16,o=0,i=n.querySelector("li"),a=window.getComputedStyle(i),s=i.offsetHeight+(a?parseFloat(a["margin-bottom"].replace("px","")):0);this.arrowMouseUp=!1;var u=function(){o--<=1&&(this.scrollToPosition(n.scrollTop+e*s),o=r=Math.max(1,Math.floor(.75*r))),this.arrowMouseUp||window.requestAnimationFrame(u)}.bind(this);window.requestAnimationFrame(u)}}},{key:"onArrowMouseUp",value:function(t){this.arrowMouseUp=!0}},{key:"scrollToPosition",value:function(t){"undefined"==typeof this.targetScrollPosition?(this.targetScrollPosition=t,this.animateScrollPosition()):this.targetScrollPosition=t}},{key:"scrollToSelectedItem",value:function(){var t=this.refs["item-list"],e=t.querySelector(".selected");e&&this.scrollToPosition(e.offsetTop-t.offsetHeight)}},{key:"animateScrollPosition",value:function(){var t=this.refs["item-list"],e=void 0;"undefined"==typeof this.scrollPosition&&(this.scrollPosition=t.scrollTop),e=this.targetScrollPosition-this.scrollPosition,Math.abs(e)>1?(this.scrollPosition+=.25*e,t.scrollTop=this.scrollPosition,window.requestAnimationFrame(this.animateScrollPosition)):(t.scrollTop=this.targetScrollPosition,this.targetScrollPosition=void 0,this.scrollPosition=void 0)}},{key:"getDefaultState",value:function(){return{}}},{key:"render",value:function(){var t=this,e=void 0;return l["default"].createElement("div",{className:"panorama item-selector"},l["default"].createElement("h3",null,this.props.title),l["default"].createElement("div",{className:"scroll-arrow up-arrow",onMouseDown:this.onArrowMouseDown,onMouseUp:this.onArrowMouseUp}),l["default"].createElement("ul",{ref:"item-list"},this.props.items.map(function(n,r){return e=t.props.selectedItem.id==n.id||t.props.selectedItem===n||t.props.selectedIndex===r,l["default"].createElement("li",{className:"item"+(e?" selected":""),"data-index":r,key:r,onClick:t.onItemClick},l["default"].createElement("span",null,n.name.toUpperCase()))})),l["default"].createElement("div",{className:"scroll-arrow down-arrow",onMouseDown:this.onArrowMouseDown,onMouseUp:this.onArrowMouseUp}))}}]),e}(l["default"].Component);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(29)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=(u(l),n(20)),f=n(19),p=n(172),h=u(p),d=n(15),y=(u(d),n(27)),v=(u(y),n(63)),m=(u(v),["stroke","color","weight","opacity","fill","fillColor","fillOpacity","fillRule","dashArray","lineCap","lineJoin","clickable","pointerEvents","className"]);n(139);var g=function(t){function e(){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.mouseTimer=null,this.currentId=null,this.hasTooltip=!1,this.state={showTooltip:!1,tooltipPosition:null,tooltipContent:""}}return o(e,t),i(e,null,[{key:"PropTypes",value:{styler:l.PropTypes.func,onEachFeature:l.PropTypes.func,setTooltipContent:l.PropTypes.func,selectedStyle:l.PropTypes.object,onFeatureClick:l.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{selectedStyle:{}},enumerable:!0}]),i(e,[{key:"shouldComponentUpdate",value:function(t){return!0}},{key:"componentWillMount",value:function(){r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props.data,n=this.setGeoJSONOptions();this.setTooltipFlag(),this.leafletElement=(0,f.geoJson)(t,n)}},{key:"componentDidMount",value:function(){var t=this.props.map;this.leafletElement.addTo(t),this.hasTooltip&&t.on("mousemove",this.onMouseMove.bind(this))}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(t){var e=this.props.data;t.data!==e&&this.leafletElement.addData(e)}},{key:"setGeoJSONOptions",value:function(){var t=s(this.props,[]);return{style:t.style||null,onEachFeature:t.onEachFeature||this.onEachFeature.bind(this),filter:t.filter||null,pointToLayer:t.pointToLayer||null,coordsToLatLng:t.coordsToLatLng||null}}},{key:"setTooltipFlag",value:function(){var t=this,e=this.props.children;l.Children.forEach(e,function(e){e.type&&e.type.name&&"Tooltip"===e.type.name&&(t.hasTooltip=!0)})}},{key:"getPathOptions",value:function(t){return(0,h["default"])(t,m)}},{key:"getTooltipContent",value:function(t){return"function"==typeof this.props.setTooltipContent?this.props.setTooltipContent(t):""}},{key:"onMouseOver",value:function(t){if(this.currentId!==t.target){if(t.target.setStyle(this.props.selectedStyle),this.currentId!==t.target){this.currentId=t.target;var e=this.getTooltipContent(t.target.feature);this.setState({showTooltip:!0,tooltipPosition:t.latlng,tooltipContent:e})}L.Browser.ie||L.Browser.opera||t.target.bringToFront()}}},{key:"onMouseOut",value:function(t){var e=this;this.leafletElement.resetStyle(t.target),this.currentId=null,clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){null===e.currentId&&(e.currentId=null,e.setState({showTooltip:!1}))},200)}},{key:"onMouseMove",value:function(t){this.currentId&&(f.DomEvent.stopPropagation(t),this.setState({tooltipPosition:t.latlng}))}},{key:"onClick",value:function(t){"function"==typeof this.props.onFeatureClick&&this.props.onFeatureClick(t.target,this.props.map)}},{key:"onEachFeature",value:function(t,e){this.hasTooltip&&e.on({mouseover:this.onMouseOver.bind(this),mouseout:this.onMouseOut.bind(this)}),e.on("click",this.onClick.bind(this))}},{key:"render",value:function(){return this.renderChildrenWithProps({tooltipContainer:this.leafletElement,popupContainer:this.leafletElement,position:this.state.tooltipPosition,isOpen:this.state.showTooltip,content:this.state.tooltipContent})}}]),e}(c.MapLayer);e["default"]=g,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(29)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=(u(l),n(20)),f=(n(19),n(75)),p=function(t){function e(){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{center:c.PropTypes.latlng.isRequired,outerRadius:l.PropTypes.number.isRequired,innerRadius:l.PropTypes.number.isRequired},enumerable:!0},{key:"defaultProps",value:{},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){var t=this.props,n=t.center,o=t.outerRadius,i=t.innerRadius,a=s(t,["center","outerRadius","innerRadius"]);r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this),this.leafletElement=new f.LeafletDonut(n,o,i,this.getPathOptions(a))}},{key:"componentDidUpdate",value:function(t){this.props.center!==t.center&&this.leafletElement.setLatLng(this.props.center),(this.props.outerRadius!==t.outerRadius||this.props.innerRadius!==t.innerRadius)&&this.leafletElement.setRadius(this.props.outerRadius,this.props.innerRadius),this.setStyleIfChanged(t,this.props)}}]),e}(c.Path);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";var o=n(47)["default"];Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),a=o(i),s=function(t){return t.Circle.extend({initialize:function(e,n,r,o){t.Path.prototype.initialize.call(this,o),this._latlng=t.latLng(e),this._mOuterRadius=n,this._mInnerRadius=this._validateInnerRadius(n,r)},setRadius:function(t,e){return this._mOuterRadius=t,this._mInnerRadius=this._validateInnerRadius(t,e),this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t[0]]),r=this._map.latLngToLayerPoint([e.lat,e.lng-t[1]]);this._point=this._map.latLngToLayerPoint(e),this._outerRadius=Math.max(this._point.x-n.x,1),this._innerRadius=Math.max(this._point.x-r.x,1)},getBounds:function(){var e=this._getLngRadius()[0],n=this._getLatRadius()[0],r=this._latlng;return new t.LatLngBounds([r.lat-n,r.lng-e],[r.lat+n,r.lng+e])},getRadius:function(){return[this._mOuterRadius,this._mInnerRadius]},_getLatRadius:function(){return[this._mOuterRadius/40075017*360,this._mInnerRadius/40075017*360]},_getLngRadius:function(){var e=this._getLatRadius();return[e[0]/Math.cos(t.LatLng.DEG_TO_RAD*this._latlng.lat),e[1]/Math.cos(t.LatLng.DEG_TO_RAD*this._latlng.lat)]},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._outerRadius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y},_validateInnerRadius:function(t,e){return e>=t?t-1:e},getArc:function(t,e,n){var r=t.x-.01,o=t.y-e,i=t.y-n;return["M",t.x,o,"A",e,e,0,1,1,r,o,"M",r,i,"A",n,n,0,1,0,t.x,i,"Z"].join(" ")},getPathString:function(){var e=this._point,n=this._outerRadius,o=this._innerRadius;return this._checkIfEmpty()?"":t.Browser.svg?this.getArc(e,n,o):(e._round(),r=Math.round(r),"AL "+e.x+","+e.y+" "+n+","+n+" 0,23592600")}})}(a);e.LeafletDonut=s},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(29)["default"],u=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=n(20),f=n(19),p=n(63),h=u(p),d=function(t){function e(){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),i(e,[{key:"componentWillMount",value:function(){r(Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props,n=(t.children,t.map,s(t,["children","map"])),o=(0,h["default"])({},n);o.className=o.className?o.className+" panorama-leaflet-tip":"panorama-leaflet-tip",o.closeButton=!1,o.offset=o.offset||[0,-3],this.leafletElement=(0,f.popup)(o)}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.map,r=e.position,o=e.isOpen,i=e.content;r!==t.position&&this.leafletElement.setLatLng(r),i!==t.content&&this.leafletElement.setContent(i),o!==t.isOpen&&(o?(this.leafletElement.openOn(n),this.renderPopupContent()):(n.closePopup(),this.removePopupContent()))}}],[{key:"propTypes",value:{children:l.PropTypes.node,map:l.PropTypes.instanceOf(f.Map),tooltipContainer:l.PropTypes.object,position:c.PropTypes.latlng},enumerable:!0}]),e}(c.Popup);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=s(u),c=n(28);n(140);var f=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onItemClick=this.onItemClick.bind(this),this.onItemEnter=this.onItemEnter.bind(this),this.onItemLeave=this.onItemLeave.bind(this)}return o(e,t),i(e,null,[{key:"propTypes",value:{items:u.PropTypes.array.isRequired,selectedItem:u.PropTypes.string,onItemSelected:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{items:[],selectedItem:"",onItemSelected:null},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onItemClick",value:function(t){t.currentTarget&&t.currentTarget.dataset&&(this.props.onItemSelected&&this.props.onItemSelected(t.currentTarget.dataset.item,this.props.items.indexOf(t.currentTarget.dataset.item)),c.PanoramaDispatcher.Legend.selected(t.currentTarget.dataset.item,this.props.items.indexOf(t.currentTarget.dataset.item)))}},{key:"onItemEnter",value:function(t){}},{key:"onItemLeave",value:function(t){}},{key:"render",value:function(){var t=this;return l["default"].createElement("div",{className:"panorama legend"},l["default"].createElement("ul",null,this.props.items.map(function(e){return l["default"].createElement("li",{className:"item"+(t.props.selectedItem===e?" selected":""),"data-item":e,key:e,onClick:t.onItemClick,onMouseEnter:t.onItemEnter,onMouseLeave:t.onItemLeave},l["default"].createElement("span",null,t.capitalize(e)))})))}},{key:"capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]),e}(l["default"].Component);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(90)["default"],u=n(11)["default"],l=n(46)["default"],c=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var f=n(6),p=n(9),h=c(p),d=n(41),y=c(d),v=n(16),m=c(v),g=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=b}return o(e,t),i(e,null,[{key:"propTypes",value:u({},m["default"].propTypes,{range:f.PropTypes.arrayOf(f.PropTypes.string),projection:f.PropTypes.string,mapScale:f.PropTypes.number}),enumerable:!0},{key:"defaultProps",value:u({},m["default"].defaultProps,{range:["#EDF8FB","#BFD3E6","#9EBCDA","#8C96C6","#8C6BB1","#88419D","#6E016B"],projection:"albersUsa",mapScale:500}),enumerable:!0}]),i(e,[{key:"getClassSuffix",value:function(){return"map choropleth"}}]),e}(m["default"]);e["default"]=g;var b=function(t){function e(t,n){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),u(this.configs,{width:{value:n.width},height:{value:n.height},margin:{value:n.margin},range:{value:n.range},projection:{value:n.projection},mapScale:{value:n.mapScale}});var o=this;this._path=h["default"].geo.path(),this._projection=h["default"].geo[this.config("projection")](),this.data={geometry:[],values:[]},this.colorScale=h["default"].scale.quantize().range(this.config("range")),this.baseLayer=this.base.append("g").classed("map",!0),this.updateDimensions();var i=this.layer("geo",this.baseLayer,{dataBind:function(t){return o.data.geometry=t.geometry||{geometry:{features:[]}},o.data.values=t.values||[],t.geometry?(console.log("REAL"),this.selectAll("path").data(o.data.geometry.features)):this.selectAll("path").data([])},insert:function(){return console.log("Insert"),this.append("path").attr("class","geometry").style("fill",function(t){return o.colorScale(o.data.values.get(t.id))}).attr("d",o._path)}});i.on("enter",function(){}).on("merge",function(){}).on("exit",function(){})}return o(e,t),i(e,[{key:"fitMap",value:function(t){var e=h["default"].geo[this.config("projection")]().scale(1).translate([0,0]),n=h["default"].geo.path().projection(e),r=n.bounds(t),o=.95/Math.max((r[1][0]-r[0][0])/this._innerWidth,(r[1][1]-r[0][1])/this._innerHeight),i=[(this._innerWidth-o*(r[1][0]+r[0][0]))/2,(this._innerHeight-o*(r[1][1]+r[0][1]))/2];return[o,i]}},{key:"updateDimensions",value:function(){var t=this.config("margin");this._innerWidth=this.config("width")-t.left-t.right,this._innerHeight=this.config("height")-t.top-t.bottom,this.base.attr("width",this.config("width")),this.base.attr("height",this.config("height")),this.baseLayer.attr("transform","translate("+t.left+","+t.top+")")}},{key:"updateProjection",value:function(t){if(t.geometry){var e=this.config("mapScale"),n=[this._innerWidth/2,this._innerHeight/2];if("auto"===this.config("mapScale")){var r=this.fitMap(t.geometry),o=s(r,2);e=o[0],n=o[1]}this._projection=h["default"].geo[this.config("projection")]().scale(e).translate(n),this._path.projection(this._projection)}}},{key:"updateColorScale",value:function(t){var e=0;if(t.values){e=-(1/0);var n=!0,r=!1,o=void 0;try{for(var i,a=l(t.values.values());!(n=(i=a.next()).done);n=!0){var s=i.value;s>e&&(e=s)}}catch(u){r=!0,o=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}console.log("MAX: ",e)}this.colorScale.domain([0,e]).range(this.config("range"))}},{key:"preDraw",value:function(t){this.updateDimensions(),this.updateProjection(t),this.updateColorScale(t)}}]),e}(y["default"]);e.MapChoroplethImpl=b},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=s(u),c=n(181),f=s(c);n(141);var p=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{nav_data:u.PropTypes.array.isRequired,show_menu:u.PropTypes.bool,on_hamburger_click:u.PropTypes.func,style:u.PropTypes.object},enumerable:!0},{key:"defaultProps",value:{nav_data:{},show_menu:!1,on_hamburger_click:null,style:{overlay:{position:"fixed",top:0,left:0,backgroundColor:"rgba(0,0,0,0.5)"},content:{position:"absolute",top:0,left:0,bottom:"auto",right:"auto",border:0,background:"rgba(0,0,0,0.5)",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:0}}},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"computeDimensions",value:function(){return(window.innerWidth-40*this.props.nav_data.length)/this.props.nav_data.length}},{key:"render",value:function(){var t=this;return l["default"].createElement("div",null,l["default"].createElement("div",{id:"hamburger"},l["default"].createElement("img",{src:"http://dsl.richmond.edu/panorama/static/images/hamburger.png",onClick:this.props.on_hamburger_click})),l["default"].createElement(f["default"],{isOpen:this.props.show_menu,onRequestClose:this.props.on_hamburger_click,className:"nav_header",style:this.props.style},l["default"].createElement("div",{id:"nav_header"},l["default"].createElement("div",{id:"navburger"},l["default"].createElement("img",{src:"http://dsl.richmond.edu/panorama/static/images/hamburger.png",onClick:this.props.on_hamburger_click})),l["default"].createElement("h1",null,l["default"].createElement("a",{href:"http://dsl.richmond.edu/panorama/"},"American Panorama")),this.props.nav_data.map(function(e,n){return l["default"].createElement("div",{className:"pan_nav_item",key:"pan_nav_item_"+n,style:{width:t.computeDimensions()+"px"}},l["default"].createElement("a",{href:e.url},l["default"].createElement("img",{src:e.screenshot,style:{width:t.computeDimensions()+"px"}})),l["default"].createElement("br",null),l["default"].createElement("h4",null,l["default"].createElement("a",{href:e.url},e.title)))}))))}}]),e}(l["default"].Component);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(89)["default"],u=n(11)["default"],l=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var c=n(9),f=(l(c),n(21)),p=l(f),h=n(16),d=l(h),y=n(43),v=l(y),m=n(6),g=l(m);n(142);var b=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.chartConstructor=x,this.chartIdAccessor=t.chartIdAccessor}return o(e,t),i(e,null,[{key:"propTypes",value:u({},v["default"].propTypes,{
areaChartData:m.PropTypes.array,chartSpacing:m.PropTypes.number,colorPalette:m.PropTypes.array,selectedChartId:m.PropTypes.oneOfType([m.PropTypes.string,m.PropTypes.number]),chartIdAccessor:m.PropTypes.func,metadataAccessor:m.PropTypes.func}),enumerable:!0},{key:"defaultProps",value:u({},v["default"].defaultProps,{areaChartData:[],chartSpacing:4,colorPalette:null,selectedChartId:null,chartIdAccessor:null,metadataAccessor:null}),enumerable:!0}]),i(e,[{key:"getClassSuffix",value:function(){return"offset-area-chart"}},{key:"renderChildren",value:function(){var t=this,e=-this.props.areaChartData.length*this.props.chartSpacing;return g["default"].createElement("div",null,this.props.areaChartData.map(function(n,r){var o=u({},t.props,t.props.areaChartConfig,{data:[n],width:t.props.width-t.props.margin.left-t.props.margin.right,height:t.props.height-t.props.margin.top-t.props.margin.bottom+e,margin:{top:0,right:0,bottom:0,left:0},axisProps:null});if(t.props.colorPalette&&(o.fillColor=t.props.colorPalette[r%t.props.colorPalette.length]),t.props.selectedChartId&&t.props.chartIdAccessor){var i=t.props.chartIdAccessor(n);o.fillOpacity=t.props.selectedChartId===i?.9:.25}return g["default"].createElement(v["default"],s({key:r},o,{style:{left:t.props.margin.left+"px",top:r*t.props.chartSpacing+"px"}}))}))}}]),e}(d["default"]);e["default"]=b;var x=function(t){function e(t,n){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n);var o=this;this.configs.selectedChartId={value:n.selectedChartId},this.accessor("chartId",n.chartIdAccessor),this.accessor("metadata",n.metadataAccessor);var i=this.baseLayer=this.base.append("g").classed("offset-area-layer",!0);this.updateDimensions();var s=this.layer("offset-area-line-layer",i,{dataBind:function(t){return this.selectAll("line.lifespan").data(t)},insert:function(){var t=o.config("height")-o.config("margin").bottom-this.size()*n.chartSpacing,e=o.config("xScale").domain();return this.append("line").attr("class","lifespan").attr("x1",function(t){return o.config("xScale")(Math.max(o.accessor("x")(t,0),e[0]))}).attr("x2",function(t){return o.config("xScale")(Math.min(o.accessor("x")(t,1),e[1]))}).attr("y1",0).attr("y2",0).attr("transform",function(e,r){return"translate(0,"+(t+r*n.chartSpacing)+")"}).style("stroke",function(t,e){return n.colorPalette[e%n.colorPalette.length]})}});s.on("update",function(){}).on("enter",function(){}).on("merge",function(){var t=o.config("height")-o.config("margin").bottom-this.size()*n.chartSpacing,e=o.config("xScale").domain();return this.attr("x1",function(t){return o.config("xScale")(Math.max(o.accessor("x")(t,0),e[0]))}).attr("x2",function(t){return o.config("xScale")(Math.min(o.accessor("x")(t,1),e[1]))}).attr("y1",0).attr("y2",0).attr("transform",function(e,r){return"translate(0,"+(t+r*n.chartSpacing)+")"}).style("opacity",function(t){return o.accessor("chartId")(t)==o.config("selectedChartId")?.9:.25})}).on("exit",function(){});var u=this.layer("offset-area-dots-layer",i,{dataBind:function(t){return this.selectAll("g.metadata").data(t)},insert:function(){var t=o.config("height")-o.config("margin").bottom-this.size()*n.chartSpacing,e=o.config("xScale").domain();return this.append("g").attr("class","metadata").attr("transform",function(e,r){return"translate(0,"+(t+r*n.chartSpacing)+")"}).selectAll("circle").data(function(t){return o.accessor("metadata")(t)}).enter().append("circle").attr("cx",function(t){return o.config("xScale")(Math.max(t,e[0]))}).attr("cy",0).attr("r",2).style("fill",function(t,e,r){return n.colorPalette[r%n.colorPalette.length]})}});u.on("merge",function(){var t=o.config("height")-o.config("margin").bottom-this.size()*n.chartSpacing,e=o.config("xScale").domain();return this.attr("transform",function(e,r){return"translate(0,"+(t+r*n.chartSpacing)+")"}).selectAll("circle").attr("cx",function(t){return o.config("xScale")(Math.max(t,e[0]))}).style("opacity",function(t){return o.accessor("chartId")(t)==o.config("selectedChartId")?.9:.25})})}return o(e,t),i(e,[{key:"updateConfigs",value:function(t){r(Object.getPrototypeOf(e.prototype),"updateConfigs",this).call(this,t),this.config("selectedChartId",t.selectedChartId)}},{key:"updateScales",value:function(t){this.config("xScale").range([0,this._innerWidth]),this.config("yScale").range([this._innerHeight,0])}}]),e}(p["default"]);e.OffsetAreaChartImpl=x},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"],u=n(47)["default"];Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),c=s(l),f=n(9),p=u(f),h=n(184),d=s(h);n(143);var y=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),i(e,null,[{key:"propTypes",value:{header:l.PropTypes.object,categories:l.PropTypes.array.isRequired,items:l.PropTypes.array.isRequired,onItemClick:l.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{header:{title:"",subtitle:"",caption:""},categories:[],items:[],onItemClick:null},enumerable:!0}]),i(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.renderVisualization()}},{key:"componentDidUpdate",value:function(){v.destroy(this.refs.content),this.renderVisualization()}},{key:"componentWillUnmount",value:function(){v.destroy(this.refs.content)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"panorama punchcard"},this.renderPlaceholder(),this.renderHeader(),c["default"].createElement("div",{className:"content",ref:"content"}))}},{key:"renderVisualization",value:function(){d["default"].isEmpty(this.props.categories)?this.refs.placeholder.style.display="":(this.refs.placeholder.style.display="none",v.update(this.refs.content,this.props.categories,this.props.items,this.props.onItemClick))}},{key:"renderHeader",value:function(){return c["default"].createElement("div",{className:"header",ref:"header"},c["default"].createElement("h2",null,this.props.header.title?this.props.header.title.toUpperCase():""),c["default"].createElement("h3",null,c["default"].createElement("span",{className:"subtitle"},this.props.header.subtitle),c["default"].createElement("span",{className:"caption"},this.props.header.caption)))}},{key:"renderPlaceholder",value:function(){return d["default"].isEmpty(this.props.categories)?c["default"].createElement("div",{className:"placeholder",ref:"placeholder"},c["default"].createElement("h4",null,"No commodities data available for this canal in the selected year.")):c["default"].createElement("div",{className:"placeholder",ref:"placeholder"},c["default"].createElement("h4",null,"Loading..."))}}]),e}(c["default"].Component);e["default"]=y;var v={ROW_HEIGHT:25,COMMODITY_TEXT_OFFSET_Y:5,create:function(t,e,n){this.update(t,e,n)},update:function(t,e,n,r){var o=this,i=10,a=this,s=p.scale.sqrt().range([2,i]).domain([1,p.max(n,function(t){return t.normalizedValue||0})]),u=s.domain(),l=u[0]+Math.sqrt(.25)*(u[1]-u[0]),c=p.scale.ordinal().range(["rgb(188, 35, 64)","rgb(228, 104, 75)","rgb(187, 27, 105)","rgb(103, 116, 99)","rgb(26, 169, 143)","rgb(10, 103, 150)","rgb(67, 40, 93)","rgb(86, 96, 99)"]).domain([1,p.max(e,function(t){return t.aggregateNormalizedValue})]),f=p.select(t).selectAll("div").data(e).enter().append("div").attr("style",function(t){return"color: "+c(t.aggregateNormalizedValue)+";"}).attr("class","category");f.append("h4").text(function(t){return t.name}),f=f.append("svg").attr("height",function(t){return t.commodities.length*a.ROW_HEIGHT}).style("stroke",function(t){return c(t.aggregateNormalizedValue)}).style("fill",function(t){return c(t.aggregateNormalizedValue)}),this.categoryNodeWidth=(f.node().offsetWidth||f.node().getBoundingClientRect().width)-2.5*this.ROW_HEIGHT;var h=f.selectAll("g").data(function(t){return t.commodities}).enter().append("g");h.append("circle").attr("r",function(t){return s(t.normalizedValue?t.normalizedValue:l)}).style("fill",function(t){return t.normalizedValue?null:"none"}).style("stroke",function(t){return t.normalizedValue?"none":null}).style("stroke-width",function(t){return t.normalizedValue?null:2}),h.append("text").text(function(t){return t.name}).style("stroke","none").attr("x",2*a.ROW_HEIGHT).attr("y",a.COMMODITY_TEXT_OFFSET_Y).call(this.wrap,this.categoryNodeWidth);var d=void 0;f.each(function(t,e){p.select(this).selectAll("g").each(function(t,e){e||(d=0);var n=p.select(this);n.attr("transform","translate("+.5*a.ROW_HEIGHT+", "+(e+.5+d)*a.ROW_HEIGHT+")"),d+=n.selectAll("tspan").size()-1});var n=p.select(this);n.attr("height",parseFloat(n.attr("height"))+d*a.ROW_HEIGHT)}),h.append("rect").attr("x",-i).attr("y",-i).attr("width",this.categoryNodeWidth+2.5*this.ROW_HEIGHT).attr("height",this.ROW_HEIGHT).on("mouseover",function(t,e){a.onItemMouseOver(this,t,e)}).on("mouseout",function(t,e){a.onItemMouseOut(this,t,e)}).on("click",function(t,e){r&&r.call(o,t,e)})},onItemMouseOver:function(t,e,n){var r=p.select(t.parentNode);r.select("text").text((e.prettyValue||e.value)+(e.units?" "+e.units:"")).style("font-weight",400)},onItemMouseOut:function(t,e,n){var r=p.select(t.parentNode);r.select("text").text(e.name).style("font-weight",null).call(this.wrap,this.categoryNodeWidth)},destroy:function(t){p.select(t).html("")},wrap:function(t,e){t.each(function(){var t=["/","&"],n=p.select(this),r=n.text(),o=void 0;t.forEach(function(t){r=r.replace(t,t+" ")});for(var i=r.split(/\s+/).reverse(),a=void 0,s=[],u=0,l=1.1,c=n.attr("x"),f=n.attr("y"),h=parseFloat(n.attr("dy")||0),d=n.text(null).append("tspan").attr("x",c).attr("y",f).attr("dy",h+"em");a=i.pop();)s.push(a),d.text(s.join(" ")),d.node().getComputedTextLength()>e&&(s.pop(),o=s.join(" "),t.forEach(function(t){o=o.replace(t+" ",t)}),d.text(o),s=[a],d=n.append("tspan").attr("x",c).attr("y",f).attr("dy",++u*l+h+"em").text(a))})}};t.exports=e["default"]},function(t,e,n){"use strict";var r=n(4)["default"],o=n(5)["default"],i=n(3)["default"],a=n(2)["default"],s=n(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),l=n(20),c=n(9),f=s(c);n(144);var p=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.map=null}return o(e,t),i(e,null,[{key:"propTypes",value:{features:u.PropTypes.object.isRequired,currentDate:u.PropTypes.instanceOf(Date)},enumerable:!0},{key:"defaultProps",value:{features:{},currentDate:null},enumerable:!0}]),i(e,[{key:"componentDidMount",value:function(){this.markers=[],this.map=this.props.map,this._el=L.DomUtil.create("div","panorama time-based-markers-layer leaflet-zoom-hide leaflet-d3-overlay"),this.map.getPanes().overlayPane.appendChild(this._el),this.svg=f["default"].select(this._el).append("svg"),this.container=this.svg.append("g").attr("class","panorama time-based-markers-container"),this.setOverlayPosition(),this.map.on("viewreset",this._reset,this),this.dirty&&this.draw(this.props.features)}},{key:"componentWillUnmount",value:function(){this.map.getPanes().overlayPane.removeChild(this._el),this.map.off("viewreset",this._reset,this),this.markers=[],this.line=null}},{key:"componentDidUpdate",value:function(){var t=this;this.props.features&&this.props.features.features.length&&!this.loaded&&this.draw(this.props.features),this.props.currentDate!==this.currentDate&&(this.currentDate=this.props.currentDate,this.filter()),setTimeout(function(){t.map.getPanes().overlayPane.appendChild(t._el)},1)}},{key:"render",value:function(){return!1}},{key:"setOverlayPosition",value:function(){var t=this.map.getBounds(),e=this.map.latLngToLayerPoint(t.getNorthWest());this.map.latLngToLayerPoint(t.getSouthEast());this.svg&&(f["default"].select(this._el).style("width",this.map.getSize().x+"px").style("height",this.map.getSize().y+"px").style("margin-left","0px").style("margin-top","0px").attr("transform","translate("+-e.x+","+-e.y+")"),this.svg.style("width",this.map.getSize().x+"px").style("height",this.map.getSize().y+"px"))}},{key:"_reset",value:function(){this.setOverlayPosition(),this.filter(),this.position()}},{key:"filter",value:function(){if(this.map){var t=this.props.currentDate||null,e=this.map.getZoom(),n=!1;this.markers.forEach(function(r){r.show="none",t&&e>=r.zoomStart&&e<=r.zoomEnd&&(r.start?!r.end&&t>=r.start?(r.show="block",n=!0):t>=r.start&&t<=r.end&&(r.show="block",n=!0):(r.show="block",n=!0)),r.elm.style("display",r.show)}),n&&this.position()}}},{key:"position",value:function(){if(this.markers&&this.map){var t=this;this.markers.forEach(function(e){if("none"!==e.show){var n;"icon"===e.markerType?(n=t.map.latLngToLayerPoint(e.coords),e.elm.attr("cx",n.x+"px").attr("cy",n.y+"px")):"label"===e.markerType?(n=t.map.latLngToLayerPoint(e.coords),e.elm.attr("x",n.x+"px").attr("y",n.y+"px")):"line"===e.markerType&&e.elm.attr("d",t.line(e.coords))}})}}},{key:"draw",value:function(t){function e(t,e){return i.container.append("circle").attr("class","time-based-"+[e.maptype,e.type].join(" ")).attr("cx",t.x+"px").attr("cy",t.y+"px").attr("r",3)}function n(t,e){var n="left"===e.justify?"start":"end";return i.container.append("text").attr("class","with-outlines time-based-"+[e.maptype,e.type].join(" ")).attr("x",t.x+"px").attr("y",t.y+"px").attr("text-anchor",n).text(e.location)}function r(t,e){return i.container.append("path").attr("class","time-based-"+[e.maptype,e.type].join(" ")).attr("d",i.line(t))}function o(o){t.features.forEach(function(t){var a,s,u,l=t.properties,c=t.geometry.type;l.maptype===o&&("icon"===l.maptype?(a=t.geometry.coordinates.reverse(),u=i.map.latLngToLayerPoint(a),s=e(u,l)):"label"===l.maptype?(a=t.geometry.coordinates.reverse(),u=i.map.latLngToLayerPoint(a),s=n(u,l)):"line"===l.maptype&&(a=t.geometry.coordinates,a.forEach(function(t){t.reverse()}),s=r(a,l)),s?i.markers.push({elm:s,coords:a,geometryType:c,markerType:l.maptype||"",start:l.start_year?new Date(l.start_year):null,end:l.end_year?new Date(l.end_year):null,zoomStart:l.startzoom?+l.startzoom:i.map.minZoom,zoomEnd:l.endzoom?+l.endzoom:i.map.maxZoom}):console.error("Unknown feature: ",t))})}if(t&&!this.loaded){if(this.loaded=!0,!this.map)return void(this.dirty=!0);this.dirty=!1;var i=this;if(this.markers.length)return position();this.line=f["default"].svg.line().x(function(t){return i.map.latLngToLayerPoint(t).x}).y(function(t){return i.map.latLngToLayerPoint(t).y}).interpolate("linear"),this.markers=[],o("label"),o("line"),o("icon"),this.filter()}}}]),e}(l.MapLayer);e["default"]=p,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(92),__esModule:!0}},function(t,e,n){t.exports={"default":n(94),__esModule:!0}},function(t,e,n){t.exports={"default":n(95),__esModule:!0}},function(t,e,n){t.exports={"default":n(96),__esModule:!0}},function(t,e,n){t.exports={"default":n(97),__esModule:!0}},function(t,e,n){t.exports={"default":n(98),__esModule:!0}},function(t,e,n){"use strict";var r=n(11)["default"];e["default"]=r||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.__esModule=!0},function(t,e,n){"use strict";var r=n(46)["default"],o=n(83)["default"];e["default"]=function(){function t(t,e){var n=[],o=!0,i=!1,a=void 0;try{for(var s,u=r(t);!(o=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(l){i=!0,a=l}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(o(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.__esModule=!0},function(t,e,n){n(38),n(37),t.exports=n(123)},function(t,e,n){n(38),n(37),t.exports=n(124)},function(t,e,n){n(126),t.exports=n(10).Object.assign},function(t,e,n){var r=n(7);t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(7);t.exports=function(t,e,n){return r.setDesc(t,e,n)}},function(t,e,n){var r=n(7);n(127),t.exports=function(t,e){return r.getDesc(t,e)}},function(t,e,n){n(128),t.exports=n(10).Object.setPrototypeOf},function(t,e,n){n(129),n(37),n(38),n(130),t.exports=n(10).Promise},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(23),o=n(12).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(17),o=n(105),i=n(104),a=n(13),s=n(120),u=n(57);t.exports=function(t,e,n,l){var c,f,p,h=u(t),d=r(n,l,e?2:1),y=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(i(h))for(c=s(t.length);c>y;y++)e?d(a(f=t[y])[0],f[1]):d(t[y]);else for(p=h.call(t);!(f=p.next()).done;)o(p,d,f.value,e)}},function(t,e,n){t.exports=n(12).document&&document.documentElement},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(14),o=n(8)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(13);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){var a=t["return"];throw void 0!==a&&r(a.call(t)),i}}},function(t,e,n){"use strict";var r=n(7),o=n(52),i=n(36),a={};n(35)(a,n(8)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(8)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){n=!0},i[r]=function(){return a},t(i)}catch(s){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r,o,i,a=n(12),s=n(119).set,u=a.MutationObserver||a.WebKitMutationObserver,l=a.process,c=a.Promise,f="process"==n(22)(l),p=function(){var t,e,n;for(f&&(t=l.domain)&&(l.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;o=void 0,t&&t.enter()};if(f)i=function(){l.nextTick(p)};else if(u){var h=1,d=document.createTextNode("");new u(p).observe(d,{characterData:!0}),i=function(){d.data=h=-h}}else i=c&&c.resolve?function(){c.resolve().then(p)}:function(){s.call(a,p)};t.exports=function(t){var e={fn:t,next:void 0,domain:f&&l.domain};o&&(o.next=e),r||(r=e,i()),o=e}},function(t,e,n){var r=n(7),o=n(121),i=n(49);t.exports=n(34)(function(){var t=Object.assign,e={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=o})?function(t,e){for(var n=o(t),a=arguments,s=a.length,u=1,l=r.getKeys,c=r.getSymbols,f=r.isEnum;s>u;)for(var p,h=i(a[u++]),d=c?l(h).concat(c(h)):l(h),y=d.length,v=0;y>v;)f.call(h,p=d[v++])&&(n[p]=h[p]);return n}:Object.assign},function(t,e,n){var r=n(18),o=n(10),i=n(34);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(53);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(10),o=n(7),i=n(33),a=n(8)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.setDesc(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(12),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(13),o=n(30),i=n(8)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(55),o=n(32);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),u=r(n),l=s.length;return 0>u||u>=l?t?"":void 0:(i=s.charCodeAt(u),55296>i||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},function(t,e,n){var r,o,i,a=n(17),s=n(103),u=n(102),l=n(100),c=n(12),f=c.process,p=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,y=0,v={},m="onreadystatechange",g=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){g.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete v[t]},"process"==n(22)(f)?r=function(t){f.nextTick(a(g,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r=m in l("script")?function(t){u.appendChild(l("script"))[m]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:p,clear:h}},function(t,e,n){var r=n(55),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(32);t.exports=function(t){return Object(r(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(13),o=n(57);t.exports=n(10).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(31),o=n(8)("iterator"),i=n(14);t.exports=n(10).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){"use strict";var r=n(99),o=n(108),i=n(14),a=n(56);t.exports=n(50)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(18);r(r.S+r.F,"Object",{assign:n(110)})},function(t,e,n){var r=n(56);n(111)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){var r=n(18);r(r.S,"Object",{setPrototypeOf:n(54).set})},function(t,e){},function(t,e,n){"use strict";var r,o=n(7),i=n(51),a=n(12),s=n(17),u=n(31),l=n(18),c=n(23),f=n(13),p=n(30),h=n(117),d=n(101),y=n(54).set,v=n(113),m=n(8)("species"),g=n(116),b=n(109),x="Promise",_=a.process,P="process"==u(_),T=a[x],k=function(t){var e=new T(function(){});return t&&(e.constructor=Object),T.resolve(e)===e},O=function(){function t(e){var n=new T(e);return y(n,t.prototype),n}var e=!1;try{if(e=T&&T.resolve&&k(),y(t,T),t.prototype=o.create(T.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(33)){var r=!1;T.resolve(o.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(i){e=!1}return e}(),w=function(t,e){return i&&t===T&&e===r?!0:v(t,e)},S=function(t){var e=f(t)[m];return void 0!=e?e:t},C=function(t){var e;return c(t)&&"function"==typeof(e=t.then)?e:!1},E=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=p(e),this.reject=p(n)},M=function(t){try{t()}catch(e){return{error:e}}},j=function(t,e){if(!t.n){t.n=!0;var n=t.c;b(function(){for(var r=t.v,o=1==t.s,i=0,s=function(e){var n,i,a=o?e.ok:e.fail,s=e.resolve,u=e.reject;try{a?(o||(t.h=!0),n=a===!0?r:a(r),n===e.promise?u(TypeError("Promise-chain cycle")):(i=C(n))?i.call(n,s,u):s(n)):u(r)}catch(l){u(l)}};n.length>i;)s(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,o=t.p;L(o)&&(P?_.emit("unhandledRejection",r,o):(e=a.onunhandledrejection)?e({promise:o,reason:r}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},L=function(t){var e,n=t._d,r=n.a||n.c,o=0;if(n.h)return!1;for(;r.length>o;)if(e=r[o++],e.fail||!L(e.promise))return!1;return!0},I=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),j(e,!0))},A=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=C(t))?b(function(){var r={r:n,d:!1};try{e.call(t,s(A,r,1),s(I,r,1))}catch(o){I.call(r,o)}}):(n.v=t,n.s=1,j(n,!1))}catch(r){I.call({r:n,d:!1},r)}}};O||(T=function(t){p(t);var e=this._d={p:h(this,T,x),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(s(A,e,1),s(I,e,1))}catch(n){I.call(e,n)}},n(112)(T.prototype,{then:function(t,e){var n=new E(g(this,T)),r=n.promise,o=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,o.c.push(n),o.a&&o.a.push(n),o.s&&j(o,!1),r},"catch":function(t){return this.then(void 0,t)}})),l(l.G+l.W+l.F*!O,{Promise:T}),n(36)(T,x),n(114)(x),r=n(10)[x],l(l.S+l.F*!O,x,{reject:function(t){var e=new E(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(!O||k(!0)),x,{resolve:function(t){if(t instanceof T&&w(t.constructor,this))return t;var e=new E(this),n=e.resolve;return n(t),e.promise}}),l(l.S+l.F*!(O&&n(107)(function(t){T.all(t)["catch"](function(){})})),x,{all:function(t){var e=S(this),n=new E(e),r=n.resolve,i=n.reject,a=[],s=M(function(){d(t,!1,a.push,a);var n=a.length,s=Array(n);n?o.each.call(a,function(t,o){var a=!1;e.resolve(t).then(function(t){a||(a=!0,s[o]=t,--n||r(s))},i)}):r(s)});return s&&i(s.error),n.promise},race:function(t){var e=S(this),n=new E(e),r=n.reject,o=M(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e){function n(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function r(t){if(!(this instanceof r))return new r(t);t||(t={}),t.nodeType&&(t={el:t}),this.opts=t,this.el=t.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}t.exports=function(t){return new r(t)},r.prototype.add=function(t){var e=this.el;if(e){if(""===e.className)return e.className=t;var r=e.className.split(" ");return n(r,t)>-1?r:(r.push(t),e.className=r.join(" "),r)}},r.prototype.remove=function(t){var e=this.el;if(e&&""!==e.className){var r=e.className.split(" "),o=n(r,t);return o>-1&&r.splice(o,1),e.className=r.join(" "),r}},r.prototype.has=function(t){var e=this.el;if(e){var r=e.className.split(" ");return n(r,t)>-1}},r.prototype.toggle=function(t){var e=this.el;e&&(this.has(t)?this.remove(t):this.add(t))}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),o=l.length,u=0;o>u;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Based on code that is Copyright 2013-2015, Facebook, Inc.
	  All rights reserved.
	*/
!function(){"use strict";var o=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};r=function(){return i}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},function(t,e){},134,134,134,134,134,134,134,134,134,134,function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(146),i=n(58);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,a){return t.call(e,n,r,o,i,a)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e,n){function r(t){return a(function(e,n){var r=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,l=a>1?n[a-1]:void 0;for("function"==typeof s?(s=o(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&i(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++r<a;){var c=n[r];c&&t(e,c,s)}return e})}var o=n(147),i=n(150),a=n(154);t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function o(t){return i(t)&&p.call(t)==s}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?h.test(c.call(t)):n(t)&&u.test(t)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,f=l.hasOwnProperty,p=l.toString,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&a(c(t))}function o(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?l:e,t>-1&&t%1==0&&e>t}function i(t,e,n){if(!s(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,l=9007199254740991,c=n("length");t.exports=i},function(t,e,n){function r(t,e,n){for(var r=-1,o=a(e),i=o.length;++r<i;){var s=o[r],u=t[s],l=n(u,e[s],s,t,e);(l===l?l===u:u!==u)&&(void 0!==u||s in t)||(t[s]=l)}return t}var o=n(145),i=n(148),a=n(58),s=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&i(f(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function a(t){return n(t)&&o(t)&&u.call(t,"callee")&&!l.call(t,"callee")}var s=Object.prototype,u=s.hasOwnProperty,l=s.propertyIsEnumerable,c=9007199254740991,f=r("length");t.exports=a},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function i(t){return a(t)&&d.call(t)==l}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:i(t)?y.test(p.call(t)):n(t)&&c.test(t)}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,h=f.hasOwnProperty,d=f.toString,y=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),m=9007199254740991,g=v||function(t){return n(t)&&o(t.length)&&d.call(t)==u};t.exports=g},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),a=Array(i);++r<i;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=a,t.apply(this,s)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},function(t,e,n){function r(t,e,n){for(var r=-1,i=o(e),a=i.length;++r<a;){var s=i[r],u=t[s],l=n(u,e[s],s,t,e);(l===l?l===u:u!==u)&&(void 0!==u||s in t)||(t[s]=l)}return t}var o=n(64);t.exports=r},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(158),i=n(64);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t,e,n,l){l||(l=[]);for(var c=-1,f=t.length;++c<f;){var p=t[c];u(p)&&s(p)&&(n||a(p)||i(p))?e?r(p,e,n,l):o(l,p):n||(l[l.length]=p)}return l}var o=n(155),i=n(40),a=n(27),s=n(24),u=n(26);t.exports=r},function(t,e,n){var r=n(164),o=r();t.exports=o},function(t,e,n){function r(t,e){return o(t,e,i)}var o=n(160),i=n(65);t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e,n){function r(t){return a(function(e,n){var r=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,l=a>1?n[a-1]:void 0;for("function"==typeof s?(s=o(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&i(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++r<a;){var c=n[r];c&&t(e,c,s)}return e})}var o=n(60),i=n(166),a=n(59);t.exports=r},function(t,e,n){function r(t){return function(e,n,r){for(var i=o(e),a=r(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var l=a[u];if(n(i[l],l,i)===!1)break}return e}}var o=n(62);t.exports=r},function(t,e,n){var r=n(162),o=r("length");t.exports=o},function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}var o=n(24),i=n(39),a=n(15);t.exports=r},function(t,e,n){function r(t,e){t=o(t);for(var n=-1,r=e.length,i={};++n<r;){var a=e[n];a in t&&(i[a]=t[a])}return i}var o=n(62);t.exports=r},function(t,e,n){function r(t,e){var n={};return o(t,function(t,r,o){e(t,r,o)&&(n[r]=t)}),n}var o=n(161);t.exports=r},function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,l=!!r&&s(r)&&(i(t)||o(t)),f=-1,p=[];++f<n;){var h=e[f];(l&&a(h,r)||c.call(t,h))&&p.push(h)}return p}var o=n(40),i=n(27),a=n(39),s=n(25),u=n(65),l=Object.prototype,c=l.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return o(t)&&s.call(t)==i}var o=n(15),i="[object Function]",a=Object.prototype,s=a.toString;t.exports=r},function(t,e,n){function r(t){return null==t?!1:o(t)?c.test(u.call(t)):i(t)&&a.test(t)}var o=n(170),i=n(26),a=/^\[object .+?Constructor\]$/,s=Object.prototype,u=Function.prototype.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){var r=n(159),o=n(60),i=n(167),a=n(168),s=n(59),u=s(function(t,e){return null==t?{}:"function"==typeof e[0]?a(t,o(e[0],e[1],3)):i(t,r(e))});t.exports=u},function(t,e){function n(t){return t}t.exports=n},function(t,e){function n(){l=!1,a.length?u=a.concat(u):c=-1,u.length&&r()}function r(){if(!l){var t=setTimeout(n);l=!0;for(var e=u.length;e;){for(a=u,u=[];++c<e;)a&&a[c].run();c=-1,e=u.length}a=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var a,s=t.exports={},u=[],l=!1,c=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new o(t,e)),1!==u.length||l||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){var r;!function(){function o(t){function e(){for(;s=c<l.length&&t>f;){var e=c++,r=l[e],o=a.call(r,1);o.push(n(e)),++f,r[0].apply(null,o)}}function n(t){return function(n,o){--f,null==h&&(null!=n?(h=n,c=p=NaN,r()):(l[t]=o,--p?s||e():r()))}}function r(){null!=h?d(h):u?d(h,l):d.apply(null,[h].concat(l))}var o,s,u,l=[],c=0,f=0,p=0,h=null,d=i;return t||(t=1/0),o={defer:function(){return h||(l.push(arguments),++p,e()),o},await:function(t){return d=t,u=!1,p||r(),o},awaitAll:function(t){return d=t,u=!0,p||r(),o}}}function i(){}var a=[].slice;o.version="1.0.7",r=function(){return o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},function(t,e,n){(function(e){function r(t){delete t.ref}var o=n(6),i=n(42),a=n(133),s=o.createFactory(n(177)),u=n(178),l=n(131),c=n(42).unstable_renderSubtreeIntoContainer,f=a.canUseDOM?window.HTMLElement:{};t.exports=o.createClass({displayName:"Modal",statics:{setAppElement:u.setElement,injectCSS:function(){"production"!==e.env.NODE_ENV&&console.warn("React-Modal: injectCSS has been deprecated and no longer has any effect. It will be removed in a later version")}},propTypes:{isOpen:o.PropTypes.bool.isRequired,style:o.PropTypes.shape({content:o.PropTypes.object,overlay:o.PropTypes.object}),appElement:o.PropTypes.instanceOf(f),onRequestClose:o.PropTypes.func,closeTimeoutMS:o.PropTypes.number,ariaHideApp:o.PropTypes.bool},getDefaultProps:function(){return{isOpen:!1,ariaHideApp:!0,closeTimeoutMS:0}},componentDidMount:function(){this.node=document.createElement("div"),this.node.className="ReactModalPortal",document.body.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function(t){this.renderPortal(t)},componentWillUnmount:function(){i.unmountComponentAtNode(this.node),document.body.removeChild(this.node)},renderPortal:function(t){t.isOpen?l(document.body).add("ReactModal__Body--open"):l(document.body).remove("ReactModal__Body--open"),t.ariaHideApp&&u.toggle(t.isOpen,t.appElement),r(t),this.portal=c(this,s(t),this.node)},render:function(){return o.DOM.noscript()}})}).call(e,n(174))},function(t,e,n){function r(t){t.stopPropagation()}var o=n(6),i=o.DOM.div,a=n(179),s=n(180),u=n(151),l={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}},c={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};t.exports=o.createClass({displayName:"ModalPortal",getDefaultProps:function(){return{style:{overlay:{},content:{}}}},getInitialState:function(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function(t){!this.props.isOpen&&t.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!t.isOpen&&this.close()},componentDidUpdate:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function(t){this.focusAfterRender=t},open:function(){a.setupScopedFocus(this.node),a.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0})}.bind(this))},close:function(){this.ownerHandlesClose()&&(this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout())},focusContent:function(){this.refs.content.focus()},closeWithTimeout:function(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function(){this.setState({afterOpen:!1,beforeClose:!1},this.afterClose)},afterClose:function(){a.returnFocus(),a.teardownScopedFocus()},handleKeyDown:function(t){9==t.keyCode&&s(this.refs.content,t),27==t.keyCode&&this.requestClose()},handleOverlayClick:function(){this.ownerHandlesClose()?this.requestClose():this.focusContent()},requestClose:function(){this.ownerHandlesClose()&&this.props.onRequestClose()},ownerHandlesClose:function(){return this.props.onRequestClose},shouldBeClosed:function(){return!this.props.isOpen&&!this.state.beforeClose},buildClassName:function(t,e){var n=l[t].base;return this.state.afterOpen&&(n+=" "+l[t].afterOpen),this.state.beforeClose&&(n+=" "+l[t].beforeClose),e?n+" "+e:n},render:function(){return this.shouldBeClosed()?i():i({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:u({},c.overlay,this.props.style.overlay||{}),onClick:this.handleOverlayClick},i({ref:"content",style:u({},c.content,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onClick:r,onKeyDown:this.handleKeyDown},this.props.children))}})},function(t,e){function n(t){if("string"==typeof t){var e=document.querySelectorAll(t);t="length"in e?e[0]:e}u=t||u}function r(t){a(t),(t||u).setAttribute("aria-hidden","true")}function o(t){a(t),(t||u).removeAttribute("aria-hidden")}function i(t,e){t?r(e):o(e)}function a(t){if(!t&&!u)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function s(){u=document.body}var u="undefined"!=typeof document?document.body:null;e.toggle=i,e.setElement=n,e.show=o,e.hide=r,e.resetForTesting=s},function(t,e,n){function r(t){u=!0}function o(t){if(u){if(u=!1,!a)return;setTimeout(function(){if(!a.contains(document.activeElement)){var t=i(a)[0]||a;t.focus()}},0)}}var i=n(66),a=null,s=null,u=!1;e.markForFocusLater=function(){s=document.activeElement},e.returnFocus=function(){try{s.focus()}catch(t){console.warn("You tried to return focus to "+s+" but it is not in the DOM anymore")}s=null},e.setupScopedFocus=function(t){a=t,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",o,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",o))},e.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",o)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",o))}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=r(t),o=n[e.shiftKey?0:n.length-1],i=o===document.activeElement||t===document.activeElement;if(i){e.preventDefault();var a=n[e.shiftKey?n.length-1:0];a.focus()}}},function(t,e,n){t.exports=n(176)},function(t,e){t.exports=s},function(t,e){t.exports=u},function(t,e){t.exports=l}]))});
//# sourceMappingURL=components.js.map